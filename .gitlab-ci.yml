stages:
  - Build

cache:
  paths:
    - dist/

build:dev:
  stage: Build
  interruptible: true
  script:
    - yarn --registry https://registry.npmmirror.com
    - yarn install -f
    - yarn build
    - yarn push  
  tags:
    - shared
  only:
    - /dev/

build:test:
  stage: Build
  interruptible: true
  script:
    - yarn --registry https://registry.npmmirror.com
    - yarn install -f
    - yarn build
    - yarn push  
  tags:
    - shared
  only:
    - /test/

build:prod:
  stage: Build
  interruptible: true
  script:
    - yarn --registry https://registry.npmmirror.com
    - yarn install -f
    - yarn build
    - yarn push  
  tags:
    - shared
  only:
    - /^v/
